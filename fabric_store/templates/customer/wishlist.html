{% extends "base.html" %}
{% block title %}Wishlist{% endblock %}
{% block content %}

<div class="page-head">
  <div>
    <h1>Wishlist</h1>
    <p class="muted">Your saved fabrics.</p>
  </div>
</div>

<div class="card">
  {% if rows and rows|length > 0 %}
    <div style="display:grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap:16px;">
      {% for f in rows %}
        <div class="card" style="padding:12px;">
          <a href="{{ url_for('fabric_detail', fabric_id=f.id) }}" style="text-decoration:none; color:inherit;">
            {% if f.image_path %}
              <img src="{{ url_for('static', filename=f.image_path) }}"
                   alt="{{ f.name }}"
                   style="width:100%; height:160px; object-fit:cover; border-radius:12px; margin-bottom:10px;">
            {% endif %}

            <div style="display:flex; justify-content:space-between; gap:10px; align-items:flex-start;">
              <div>
                <div style="font-weight:700;">{{ f.name }}</div>
                {% if f.category %}
                  <div class="muted small">{{ f.category }}</div>
                {% endif %}
              </div>
              <div style="font-weight:700;">â‚¹{{ "%.2f"|format(f.price) }}</div>
            </div>
          </a>

          <div style="display:flex; gap:8px; margin-top:12px; flex-wrap:wrap;">
            <form method="post" action="{{ url_for('wishlist_remove', fabric_id=f.id) }}" style="margin:0;">
              <button class="btn danger" type="submit" style="width:100%;">Remove</button>
            </form>

            <form method="post" action="{{ url_for('cart_add', fabric_id=f.id) }}" style="margin:0; flex:1;">
              <input type="hidden" name="quantity" value="1">
              <button class="btn" type="submit" style="width:100%;">Add to Cart</button>
            </form>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="muted">Your wishlist is empty.</div>
    <div style="margin-top:12px;">
      <a class="btn" href="{{ url_for('catalog') }}">Browse Catalog</a>
    </div>
  {% endif %}
</div>

{% endblock %}